<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>SVG na biało</title>
</head>
<body>
<h2>Wybierz pliki SVG</h2>
<input type="file" id="files" multiple accept=".svg">
<button id="downloadAll">Pobierz wszystkie białe SVG</button>
<div id="links"></div>

<script>
let modifiedFiles = [];

document.getElementById('files').addEventListener('change', function(e){
    const files = e.target.files;
    modifiedFiles = [];
    const linksDiv = document.getElementById('links');
    linksDiv.innerHTML = '';

    Array.from(files).forEach(file => {
        const reader = new FileReader();
        reader.onload = function(ev){
            let svgContent = ev.target.result;

            svgContent = svgContent.replace(/fill=".*?"/gi, 'fill="white"');
            svgContent = svgContent.replace(/stroke=".*?"/gi, 'stroke="white"');

            if (!/<svg[^>]*fill="/i.test(svgContent)) {
                svgContent = svgContent.replace(/<svg/, '<svg fill="white"');
            }
            if (!/<svg[^>]*stroke="/i.test(svgContent)) {
                svgContent = svgContent.replace(/<svg/, '<svg stroke="white"');
            }

            modifiedFiles.push({name: file.name, content: svgContent});

            // Utwórz link do pobrania pojedynczego pliku
            const blob = new Blob([svgContent], {type: 'image/svg+xml'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = file.name;
            a.textContent = 'Pobierz biały SVG: ' + file.name;
            linksDiv.appendChild(a);
            linksDiv.appendChild(document.createElement('br'));
        };
        reader.readAsText(file);
    });
});

document.getElementById('downloadAll').addEventListener('click', function(){
    if(modifiedFiles.length === 0){
        alert("Najpierw wybierz pliki SVG!");
        return;
    }

    modifiedFiles.forEach(file => {
        const blob = new Blob([file.content], {type: 'image/svg+xml'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = file.name;
        a.click();
        URL.revokeObjectURL(url);
    });
    alert("Wszystkie pliki pobrane!");
});
</script>
</body>
</html>
